<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>GUESTS VALENCIA ¬∑ Alquiler Vacacional de Lujo con Sandra IA 7.0</title>
    <!-- Meta tags profesionales -->
    <meta name="description" content="Alquiler vacacional de lujo en Valencia con Sandra IA 7.0 - Asistente virtual con voz y videollamadas para una experiencia premium">
    <meta name="keywords" content="valencia, alquiler vacacional, sandra ia, asistente virtual, lujo">
    <meta name="author" content="Guests Valencia">
    <!-- Open Graph para redes sociales -->
    <meta property="og:title" content="GUESTS VALENCIA ¬∑ Experiencia Premium con Sandra IA 7.0">
    <meta property="og:description" content="Alojamientos de lujo en Valencia con asistente virtual avanzado">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://guestsvalencia.es">
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#0ea5e9">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Guests Valencia">
    <!-- PWA Icons -->
    <link rel="apple-touch-icon" href="/src/assets/icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/src/assets/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/src/assets/icon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <!-- Favicon -->
    <link rel="icon" href="image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè®</text></svg>">
    <!-- Tailwind CSS Compilado -->
    <link rel="stylesheet" href="src/css/tailwind.css">
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Estilos base y variables profesionales */
        :root {
            --primary-color: #0ea5e9;
            --secondary-color: #ec4899;
            --accent-color: #8b5cf6;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
        }
        .hero-banner {
            background: url('https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?q=80&w=2070&auto=format&fit=crop') no-repeat center center;
            background-size: cover;
        }
        .card .img {
            transition: transform 0.3s ease-in-out;
        }
        .card:hover .img {
            transform: scale(1.05);
        }
        /* Smooth scroll mejorado */
        html {
            scroll-behavior: smooth;
        }
        /* Estados de conexi√≥n */
        .connection-status {
            position: fixed;
            top: 10px;
            right: 10px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            z-index: 1001;
            transition: all 0.3s ease;
        }
        .connection-online {
            background: #10b981;
            color: white;
        }
        .connection-offline {
            background: #f59e0b;
            color: white;
        }
        /* Mejoras de accesibilidad */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        /* Focus states mejorados */
        button:focus-visible,
        input:focus-visible,
        textarea:focus-visible {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }
        /* Efectos de glassmorphism */
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body class="antialiased">
    <!-- Indicador de estado de conexi√≥n -->
    <div id="connection-status" class="connection-status connection-online" style="display: none;">
        üåê Conectado
    </div>
    <div id="main-content">
        <!-- Barra superior de contacto -->
        <div class="bg-slate-800 text-white text-xs">
            <div class="container mx-auto px-4 py-2 flex justify-between items-center">
                <div class="flex items-center gap-x-4">
                    <a href="tel:+34966497016" class="hover:text-sky-400 transition-colors">üìû +34 966 497 016</a>
                    <a href="mailto:hello@guestsvalencia.es" class="hover:text-sky-400 transition-colors hidden sm:inline">‚úâÔ∏è hello@guestsvalencia.es</a>
                    <a href="https://wa.me/34966497016" target="_blank" class="bg-green-500 text-white px-3 py-1 rounded-full text-xs font-bold hover:bg-green-600 transition-colors">üí¨ WhatsApp</a>
                </div>
                <div class="flex items-center gap-x-4">
                    <span>üá™üá∏ Espa√±ol</span>
                    <span>üí∂ Euro</span>
                </div>
            </div>
        </div>
        <!-- NAVBAR (fija y con logo) -->
        <style>.site-navbar{position:sticky;top:0;z-index:50}</style>
        <div class="site-navbar bg-slate-900 text-white">
          <div class="mx-auto max-w-6xl px-6 py-3 flex items-center justify-between">
            <a href="/index.html" class="flex items-center gap-2">
              <img src="/assets/img/logo-gv.svg" alt="GuestsValencia" class="h-7 w-auto"/>
              <span class="text-sm font-semibold tracking-wide text-white/90">GuestsValencia</span>
            </a>
            <nav class="flex items-center gap-4 text-sm">
              <a href="/index.html"        class="hover:underline">Inicio</a>
              <a href="/alojamientos.html" class="hover:underline">Alojamientos</a>
              <a href="/owners.html"       class="hover:underline">Propietarios</a>
              <a href="/servicios.html"    class="hover:underline">Servicios</a>
              <a href="/contacto.html"     class="hover:underline">Contacto</a>
              <span class="mx-2 h-4 w-px bg-white/25"></span>
              <a href="/auth.html#login"   class="rounded-full bg-white/10 px-3 py-1 border border-white/20">Acceder</a>
              <a href="/auth.html#signup"  class="rounded-full bg-blue-600 hover:bg-blue-700 px-3 py-1">Registrarse</a>
            </nav>
          </div>
        </div>
        <main class="container mx-auto px-4">
            <!-- Hero Banner mejorado -->
            <div id="inicio" class="relative rounded-2xl overflow-hidden my-8">
                <div class="hero-banner h-[60vh] min-h-[400px] max-h-[600px] flex flex-col items-center justify-center p-4">
                    <h1 class="text-4xl md:text-6xl font-extrabold text-white text-center drop-shadow-lg mb-8 animate-fade-in">
                        Al√≥jate aqu√≠, Vive Valencia
                    </h1>
                    <div class="w-full max-w-2xl">
                        <div class="bg-white/90 backdrop-blur-md p-2 rounded-full shadow-2xl flex items-center gap-2 transform hover:scale-105 transition-all duration-300">
                            <input id="search-input" type="text" placeholder="Empieza tu b√∫squeda..." class="w-full bg-transparent px-4 py-3 text-lg outline-none placeholder-slate-500" aria-label="B√∫squeda de alojamientos">
                            <button id="search-btn" class="bg-sky-500 text-white rounded-full p-3 hover:bg-sky-600 transition-colors flex-shrink-0 transform hover:scale-110" aria-label="Buscar">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                    <circle cx="11" cy="11" r="8"></circle>
                                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Secci√≥n Alojamientos con loading mejorado -->
            <section id="alojamientos" class="my-16">
                <h2 class="text-3xl font-bold text-center text-slate-800 mb-10">Nuestros Alojamientos Premium</h2>
                <div id="alojamientos-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Los alojamientos se cargan din√°micamente -->
                </div>
            </section>
            <!-- Secci√≥n Servicios -->
            <section id="servicios" class="my-16">
                <h2 class="text-3xl font-bold text-center text-slate-800">Tranquilidad, Legalidad y Atenci√≥n Total</h2>
                <p class="text-center text-slate-600 mt-2 max-w-3xl mx-auto">Con Guests Valencia, tu propiedad est√° en manos expertas. Nos ocupamos de todo para que t√∫ solo disfrutes los beneficios.</p>
                <div class="grid md:grid-cols-2 gap-8 mt-10">
                    <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2">
                        <h3 class="text-xl font-bold text-sky-600">Para Propietarios</h3>
                        <ul class="mt-4 space-y-2 text-slate-600">
                            <li>‚úÖ Gesti√≥n 100% transparente</li>
                            <li>‚úÖ Publicidad profesional y fotos premium</li>
                            <li>‚úÖ Usuarios / Registro privado para controlar tus reservas</li>
                            <li>‚úÖ Cero preocupaciones: limpieza, mantenimiento, check-in y m√°s</li>
                        </ul>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2">
                        <h3 class="text-xl font-bold text-sky-600">Para Viajeros</h3>
                        <ul class="mt-4 space-y-2 text-slate-600">
                            <li>‚úÖ Reserva inmediata y asistencia 24h</li>
                            <li>‚úÖ Confirmaci√≥n por WhatsApp/email</li>
                            <li>‚úÖ Check-in r√°pido y flexible</li>
                            <li>‚úÖ Recomendaciones locales personalizadas</li>
                        </ul>
                    </div>
                </div>
            </section>
            <!-- Secci√≥n Propietarios -->
            <section id="propietarios" class="my-16 bg-slate-100 py-12 rounded-2xl">
                <div class="container mx-auto px-4">
                    <h2 class="text-3xl font-bold text-center text-slate-800">Gestionamos tu alojamiento. T√∫ solo disfruta los ingresos.</h2>
                    <p class="text-center text-slate-600 mt-2 max-w-3xl mx-auto">Desde la publicaci√≥n hasta la limpieza, lo hacemos todo por ti. Elige el plan que mejor se adapta a tus necesidades.</p>
                    <div class="grid md:grid-cols-3 gap-8 mt-10 text-center">
                        <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2">
                            <h3 class="text-xl font-bold">Plan Esencial</h3>
                            <p class="text-3xl font-extrabold text-sky-600 my-2">15% <span class="text-base font-medium text-slate-500">+IVA</span></p>
                            <p class="text-slate-600">Publicaci√≥n, calendario y comunicaci√≥n con el hu√©sped.</p>
                        </div>
                        <div class="bg-white p-8 rounded-xl shadow-xl border-2 border-sky-500 transform scale-105">
                            <div class="bg-sky-500 text-white px-3 py-1 rounded-full text-xs font-bold mb-4 inline-block">M√ÅS POPULAR</div>
                            <h3 class="text-2xl font-bold">Plan Confianza</h3>
                            <p class="text-4xl font-extrabold text-sky-600 my-2">20% <span class="text-base font-medium text-slate-500">+IVA</span></p>
                            <p class="text-slate-600">Todo lo del Plan Esencial, m√°s fotos profesionales, optimizaci√≥n de precios y gesti√≥n de limpieza.</p>
                        </div>
                        <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2">
                            <h3 class="text-xl font-bold">Plan TOTAL</h3>
                            <p class="text-3xl font-extrabold text-sky-600 my-2">25% <span class="text-base font-medium text-slate-500">+IVA</span></p>
                            <p class="text-slate-600">Todo lo anterior, m√°s reporte fiscal, asesor√≠a legal y seguro de da√±os.</p>
                        </div>
                    </div>
                </div>
            </section>
            <!-- Secci√≥n de Contacto mejorada -->
            <section id="contacto" class="my-16 bg-slate-100 py-12 rounded-2xl">
                <div class="container mx-auto px-4">
                    <h2 class="text-3xl font-bold text-center text-slate-800 mb-2">Cont√°ctanos</h2>
                    <p class="text-center text-slate-600 max-w-2xl mx-auto mb-10">¬øTienes alguna pregunta, sugerencia o quieres que gestionemos tu propiedad? Rellena el formulario y te responderemos lo antes posible.</p>
                    <form id="contact-form" class="max-w-xl mx-auto space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="full-name" class="block text-sm font-medium text-slate-700 mb-1">Nombre Completo</label>
                                <input type="text" id="full-name" required class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-sky-500 outline-none transition-all">
                            </div>
                            <div>
                                <label for="phone" class="block text-sm font-medium text-slate-700 mb-1">Tel√©fono</label>
                                <input type="tel" id="phone" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-sky-500 outline-none transition-all">
                            </div>
                        </div>
                        <div>
                            <label for="contact-email" class="block text-sm font-medium text-slate-700 mb-1">Correo Electr√≥nico</label>
                            <input type="email" id="contact-email" required class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-sky-500 outline-none transition-all">
                        </div>
                        <div>
                            <label for="subject" class="block text-sm font-medium text-slate-700 mb-1">Asunto</label>
                            <select id="subject" class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-sky-500 outline-none transition-all">
                                <option value="">Selecciona un asunto</option>
                                <option value="informacion">Informaci√≥n general</option>
                                <option value="gestion">Gesti√≥n de propiedad</option>
                                <option value="reserva">Reserva de alojamiento</option>
                                <option value="soporte">Soporte t√©cnico</option>
                                <option value="otro">Otro</option>
                            </select>
                        </div>
                        <div>
                            <label for="message" class="block text-sm font-medium text-slate-700 mb-1">Mensaje</label>
                            <textarea id="message" rows="5" required class="w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-sky-500 outline-none transition-all" placeholder="Cu√©ntanos en qu√© podemos ayudarte..."></textarea>
                        </div>
                        <button type="submit" class="w-full bg-gradient-to-r from-sky-500 to-blue-600 text-white font-semibold py-3 rounded-lg hover:shadow-lg transition-all duration-300 transform hover:scale-105">
                            <span class="flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="22" y1="2" x2="11" y2="13"></line>
                                    <polygon points="22,2 15,22 11,13 2,9 22,2"></polygon>
                                </svg>
                                Enviar Mensaje
                            </span>
                        </button>
                    </form>
                </div>
            </section>
        </main>
        <!-- Footer profesional -->
        <footer class="bg-slate-800 text-white">
            <div class="container mx-auto px-4 py-12 grid grid-cols-1 md:grid-cols-4 gap-8 text-sm">
                <div>
                    <h3 class="font-bold text-lg mb-4">GUESTS VALENCIA</h3>
                    <p class="text-slate-400 mb-2">Tu hogar lejos de casa en Valencia</p>
                    <div class="space-y-1 text-slate-400">
                        <p>üìç Avenida de las Cortes Valencianas, 58, 5¬™ planta</p>
                        <p>Valencia, Espa√±a</p>
                        <p>üìû +34 643 083 347</p>
                        <p>‚úâÔ∏è info@guestsvalencia.es</p>
                        <p class="text-xs mt-2">Valencia Dancing Club, S.L. - CIF: B16753949</p>
                    </div>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Informaci√≥n</h4>
                    <ul class="space-y-2 text-slate-400">
                        <li><a href="#" class="hover:text-white transition-colors">Experiencias</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Alquiler de invierno</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Nosotros</a></li>
                        <li><a href="#contacto" class="hover:text-white transition-colors">Contacto</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Ayuda legal</h4>
                    <ul class="space-y-2 text-slate-400">
                        <li><a href="#" onclick="showLegalDocument('condiciones')" class="hover:text-white transition-colors">Condiciones generales</a></li>
                        <li><a href="#" onclick="showLegalDocument('cookies')" class="hover:text-white transition-colors">Pol√≠tica de cookies</a></li>
                        <li><a href="#" onclick="showLegalDocument('privacidad')" class="hover:text-white transition-colors">Pol√≠tica de privacidad</a></li>
                        <li><a href="#" onclick="showLegalDocument('aviso')" class="hover:text-white transition-colors">Aviso legal</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Sandra IA 7.0</h4>
                    <p class="text-slate-400 mb-4">Asistente virtual con IA avanzada</p>
                    <button id="btn-install" class="btn bg-sky-500 text-white px-4 py-2 rounded-lg hover:bg-sky-600 transition-colors mt-4" style="display: none;">
                        üì± Instalar app
                    </button>
                </div>
            </div>
            <div class="bg-slate-900 py-4 text-center text-xs text-slate-500">
                <p>&copy; 2024 GUESTS VALENCIA - Marca registrada OEPM N0460930(1). Todos los derechos reservados.</p>
                <p class="mt-1">Valencia Dancing Club, S.L. - Powered by Sandra IA 7.0</p>
            </div>
        </footer>
    </div>
    <!-- Modal de confirmaci√≥n mejorado -->
    <div id="custom-alert" class="fixed inset-0 z-[101] hidden items-center justify-center p-4">
        <div class="absolute inset-0 bg-gray-900/80 backdrop-blur-sm" onclick="closeCustomAlert()"></div>
        <div class="relative bg-white p-8 rounded-2xl shadow-2xl max-w-md w-full text-center transform scale-95 transition-transform">
            <div class="w-16 h-16 bg-gradient-to-r from-green-400 to-green-600 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 6L9 17l-5-5"/>
                </svg>
            </div>
            <h3 id="alert-title" class="text-2xl font-bold text-slate-800 mb-4">¬°Mensaje Enviado!</h3>
            <p id="alert-message" class="text-slate-600 mb-6">Gracias por contactarnos. Te responderemos muy pronto.</p>
            <button onclick="closeCustomAlert()" class="bg-gradient-to-r from-sky-500 to-blue-600 text-white font-semibold py-3 px-6 rounded-lg hover:shadow-lg transition-all duration-300 transform hover:scale-105">
                Cerrar
            </button>
        </div>
    </div>
    <!-- Banner de Cookies RGPD -->
    <div id="cookies-banner" class="fixed bottom-0 left-0 right-0 bg-white border-t-2 border-sky-500 shadow-2xl z-50 p-4" style="display: none;">
        <div class="container mx-auto flex flex-col md:flex-row items-center justify-between gap-4">
            <div class="text-sm text-slate-700 flex-1">
                <p><strong>üç™ Usamos cookies</strong> para mejorar tu experiencia. Aceptas el uso de cookies t√©cnicas, anal√≠ticas y de personalizaci√≥n.</p>
            </div>
            <div class="flex gap-3">
                <button onclick="configureCookies()" class="px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors text-sm">
                    ‚öôÔ∏è Configurar
                </button>
                <button onclick="acceptAllCookies()" class="px-4 py-2 bg-sky-500 text-white rounded-lg hover:bg-sky-600 transition-colors text-sm font-semibold">
                    ‚úÖ Aceptar todas
                </button>
                <button onclick="rejectCookies()" class="px-3 py-2 text-slate-500 hover:text-slate-700 transition-colors text-sm">
                    ‚ùå
                </button>
            </div>
        </div>
    </div>
    <!-- Modal Documentos Legales -->
    <div id="legal-modal" class="fixed inset-0 z-[102] hidden items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="closeLegalModal()"></div>
        <div class="relative bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] flex flex-col">
            <!-- Header -->
            <div class="flex justify-between items-center p-6 border-b">
                <h3 id="legal-title" class="text-2xl font-bold text-slate-800">Documento Legal</h3>
                <button onclick="closeLegalModal()" class="p-2 hover:bg-slate-100 rounded-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <!-- Content -->
            <div class="flex-1 overflow-y-auto p-6">
                <div id="legal-content" class="prose max-w-none">
                    <!-- Contenido din√°mico -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // ===== CONFIGURACI√ìN GLOBAL =====
        let isOnline = navigator.onLine;

        // ===== FUNCIONES DE UTILIDAD =====
        function showCustomAlert(message, title = '¬°Perfecto!') {
            const alertElement = document.getElementById('custom-alert');
            const titleElement = document.getElementById('alert-title');
            const messageElement = document.getElementById('alert-message');
            titleElement.textContent = title;
            messageElement.textContent = message;
            alertElement.classList.remove('hidden');
            alertElement.classList.add('flex');
            setTimeout(closeCustomAlert, 5000);
        }

        function closeCustomAlert() {
            const alertElement = document.getElementById('custom-alert');
            alertElement.classList.add('hidden');
            alertElement.classList.remove('flex');
        }

        // ===== DATOS Y CARGA DE ALOJAMIENTOS =====
        const alojamientosData = [
            { id: '1', title: '√Åtico de Lujo en El Carmen', location: 'Valencia Centro Hist√≥rico', price: 120, rating: 4.8, reviews: 42, image: 'https://images.unsplash.com/photo-1594563703937-fdc418523b2d?q=80&w=870&auto=format&fit=crop', amenities: ['WiFi Premium', 'Aire acondicionado', 'Terraza privada', 'Cocina completa'] },
            { id: '2', title: 'Loft Moderno en Ruzafa', location: 'Valencia Distrito Art√≠stico', price: 95, rating: 4.9, reviews: 28, image: 'https://images.unsplash.com/photo-1556912173-35c24a7a4481?q=80&w=870&auto=format&fit=crop', amenities: ['WiFi Premium', 'Dise√±o moderno', 'Zona trendy', 'Parking privado'] },
            { id: '3', title: 'Apartamento con vistas al mar', location: 'Playa de la Malvarrosa', price: 150, rating: 4.7, reviews: 89, image: 'https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?q=80&w=870&auto=format&fit=crop', amenities: ['Vista al mar', 'Primera l√≠nea', 'Balc√≥n grande', 'Playa privada'] },
            { id: '4', title: 'Piso Hist√≥rico Reformado', location: 'Ciutat Vella', price: 110, rating: 4.6, reviews: 56, image: 'https://images.unsplash.com/photo-1618221195710-dd6b41faaea6?q=80&w=2070&auto=format&fit=crop', amenities: ['Edificio hist√≥rico', 'Totalmente renovado', 'Ubicaci√≥n central', 'Arquitectura √∫nica'] },
            { id: '5', title: 'Chalet con Piscina Privada', location: 'L\'Eliana (Zona residencial)', price: 250, rating: 4.9, reviews: 34, image: 'https://images.unsplash.com/photo-1580587771525-78b9dba3b914?q=80&w=1974&auto=format&fit=crop', amenities: ['Piscina privada', 'Jard√≠n grande', 'BBQ √°rea', 'Zona tranquila'] },
            { id: '6', title: 'Estudio Acogedor cerca del R√≠o', location: 'Jardines del Turia', price: 80, rating: 4.5, reviews: 67, image: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?q=80&w=2070&auto=format&fit=crop', amenities: ['Zona verde', 'Perfecto para parejas', 'Muy econ√≥mico', 'Transporte p√∫blico'] },
            { id: '7', title: 'Villa de Lujo en la Huerta', location: 'Alboraya (Tradici√≥n valenciana)', price: 300, rating: 4.8, reviews: 23, image: 'https://images.unsplash.com/photo-1570129477492-45c003edd2be?q=80&w=2070&auto=format&fit=crop', amenities: ['Lujo m√°ximo', 'Huerta valenciana', 'Experiencia aut√©ntica', 'Servicio premium'] },
            { id: '8', title: 'Casa Moderna con Jacuzzi', location: 'Pobla de Vallbona', price: 180, rating: 4.7, reviews: 45, image: 'https://images.unsplash.com/photo-1613490493576-7fde63acd811?q=80&w=2071&auto=format&fit=crop', amenities: ['Jacuzzi privado', 'Casa moderna', 'Zona residencial', 'Muy equipada'] },
            { id: '9', title: 'Apartamento Familiar en Benimaclet', location: 'Benimaclet (Zona universitaria)', price: 90, rating: 4.4, reviews: 78, image: 'https://images.unsplash.com/photo-1512917774080-9991f1c4c750?q=80&w=2070&auto=format&fit=crop', amenities: ['Ideal familias', 'Zona universitaria', 'Muy conectado', 'Precio excelente'] }
        ];

        function loadAlojamientos() {
            const alojamientosGrid = document.getElementById('alojamientos-grid');
            alojamientosGrid.innerHTML = '';
            alojamientosData.forEach((alojamiento, index) => {
                setTimeout(() => {
                    const card = document.createElement('article');
                    card.className = "card bg-white rounded-xl shadow-md overflow-hidden group hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2";
                    card.innerHTML = `
                        <div class="relative overflow-hidden">
                            <img src="${alojamiento.image}" alt="${alojamiento.title}" class="img h-56 w-full object-cover">
                            <div class="absolute top-3 right-3 bg-white/90 backdrop-blur-sm px-2 py-1 rounded-full text-xs font-bold flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 fill-yellow-400 mr-1" viewBox="0 0 24 24">
                                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                </svg>
                                ${alojamiento.rating}
                            </div>
                            <div class="absolute bottom-3 left-3 bg-gradient-to-r from-sky-500 to-blue-600 text-white px-3 py-1 rounded-full text-xs font-bold">
                                ${alojamiento.reviews} rese√±as
                            </div>
                        </div>
                        <div class="p-5">
                            <h3 class="text-xl font-bold text-slate-800 mb-2 line-clamp-1">${alojamiento.title}</h3>
                            <p class="text-sm text-slate-600 mb-3 flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                                    <circle cx="12" cy="10" r="3"/>
                                </svg>
                                ${alojamiento.location}
                            </p>
                            <div class="flex flex-wrap gap-1 mb-4">
                                ${alojamiento.amenities.slice(0, 2).map(amenity => `<span class="text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded-full">${amenity}</span>`).join('')}
                                ${alojamiento.amenities.length > 2 ? `<span class="text-xs text-slate-500">+${alojamiento.amenities.length - 2} m√°s</span>` : ''}
                            </div>
                            <div class="flex justify-between items-center">
                                <div class="text-slate-800">
                                    <span class="text-sm">Desde </span>
                                    <strong class="text-2xl font-extrabold text-sky-600">‚Ç¨${alojamiento.price}</strong>
                                    <span class="text-sm text-slate-500">/noche</span>
                                </div>
                                <button onclick="viewProperty('${alojamiento.id}')" class="bg-gradient-to-r from-sky-500 to-blue-600 text-white font-semibold px-4 py-2 rounded-lg hover:shadow-lg transition-all duration-300 transform hover:scale-105">
                                    Ver Detalles
                                </button>
                            </div>
                        </div>`;
                    alojamientosGrid.appendChild(card);
                }, index * 150);
            });
        }

        function viewProperty(propertyId) {
            const property = alojamientosData.find(p => p.id === propertyId);
            if (property) {
                showCustomAlert(`üè® ${property.title} - ‚Ç¨${property.price}/noche. Contacta +34 643 083 347 o info@guestsvalencia.es para reservar.`, 'Informaci√≥n del Alojamiento');
            }
        }

        // ===== DOCUMENTOS LEGALES Y COOKIES =====
        const legalDocuments = {
            cookies: { title: "Pol√≠tica de Cookies", content: "<h2>Pol√≠tica de Cookies ‚Äì GuestsValencia</h2><p>Son peque√±os archivos de texto que se almacenan en el navegador al visitar una web.</p>" },
            privacidad: { title: "Pol√≠tica de Privacidad", content: "<h2>Pol√≠tica de Privacidad ‚Äì GuestsValencia</h2><p>GuestsValencia garantiza la protecci√≥n de datos conforme al RGPD.</p>" },
            condiciones: { title: "Condiciones Generales de Contrataci√≥n", content: "<h2>Condiciones Generales ‚Äì GuestsValencia</h2><p>Reservas: Por web, WhatsApp, tel√©fono o plataformas.</p>" },
            aviso: { title: "Aviso Legal", content: "<h2>Aviso Legal ‚Äì GuestsValencia</h2><p>Marca comercial registrada: Guests-Valencia Alojamientos Vacacionales.</p>" }
        };

        function showLegalDocument(type) {
            const doc = legalDocuments[type];
            if (doc) {
                document.getElementById('legal-title').textContent = doc.title;
                document.getElementById('legal-content').innerHTML = doc.content;
                document.getElementById('legal-modal').classList.remove('hidden');
                document.getElementById('legal-modal').classList.add('flex');
            }
        }

        function closeLegalModal() {
            document.getElementById('legal-modal').classList.add('hidden');
            document.getElementById('legal-modal').classList.remove('flex');
        }

        function showCookiesBanner() {
            const banner = document.getElementById('cookies-banner');
            if (!localStorage.getItem('cookies-accepted')) {
                banner.style.display = 'block';
            }
        }

        function acceptAllCookies() {
            localStorage.setItem('cookies-accepted', 'all');
            document.getElementById('cookies-banner').style.display = 'none';
            showCustomAlert('‚úÖ Cookies aceptadas. Gracias por mejorar tu experiencia.', 'üç™ Cookies');
        }

        function rejectCookies() {
            localStorage.setItem('cookies-accepted', 'essential');
            document.getElementById('cookies-banner').style.display = 'none';
            showCustomAlert('‚ÑπÔ∏è Solo usaremos cookies t√©cnicas esenciales.', 'üç™ Cookies');
        }

        function configureCookies() {
            showCustomAlert('‚öôÔ∏è Panel de configuraci√≥n pr√≥ximamente. Por ahora puedes aceptar o rechazar todas.', 'Configurar Cookies');
        }

        // ===== INICIALIZACI√ìN =====
        document.addEventListener('DOMContentLoaded', function() {
            loadAlojamientos();
            setTimeout(showCookiesBanner, 2000);

            const loginContainer = document.getElementById('login-dropdown-container');
            const loginToggleBtn = document.getElementById('login-toggle-btn');
            const loginPanel = document.getElementById('login-panel');
            loginToggleBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                loginPanel.classList.toggle('hidden');
            });
            document.addEventListener('click', (e) => {
                if (!loginContainer.contains(e.target)) loginPanel.classList.add('hidden');
            });

            document.getElementById('logo-upload').addEventListener('change', (e) => {
                if (e.target.files[0]) {
                    document.getElementById('logo-image').src = URL.createObjectURL(e.target.files[0]);
                    showCustomAlert('‚úÖ Logo actualizado correctamente', 'Logo Personalizado');
                }
            });

            document.getElementById('contact-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const submitBtn = e.target.querySelector('button[type="submit"]');
                const originalText = submitBtn.innerHTML;
                submitBtn.innerHTML = '<span class="flex items-center justify-center"><svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Enviando...</span>';
                submitBtn.disabled = true;
                setTimeout(() => {
                    showCustomAlert('¬°Tu mensaje ha sido enviado correctamente! Nuestro equipo se pondr√° en contacto contigo muy pronto.', '‚úâÔ∏è Mensaje Enviado');
                    e.target.reset();
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                }, 1500);
            });

            const searchBtn = document.getElementById('search-btn');
            const searchInput = document.getElementById('search-input');
            function handleSearch() {
                const query = searchInput.value.trim();
                if (query) showCustomAlert(`üîç B√∫squeda: "${query}". Sandra te ayudar√° con esto.`, 'B√∫squeda');
            }
            searchBtn.addEventListener('click', handleSearch);
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') handleSearch();
            });

            window.addEventListener('online', () => {
                document.getElementById('connection-status').textContent = 'üåê Conectado';
                document.getElementById('connection-status').className = 'connection-status connection-online';
                document.getElementById('connection-status').style.display = 'block';
                setTimeout(() => { document.getElementById('connection-status').style.display = 'none'; }, 3000);
            });
            window.addEventListener('offline', () => {
                document.getElementById('connection-status').textContent = 'üì± Modo Offline';
                document.getElementById('connection-status').className = 'connection-status connection-offline';
                document.getElementById('connection-status').style.display = 'block';
            });
        });
    </script>

    <!-- Widget Sandra IA 7.0 con BARGE-IN -->
    <div id="sandra-root" data-heygen-embed="%HEYGEN_EMBED_URL%"></div>
    <script src="/js/sandra-widget.js" defer></script>

    <!-- PWA Installation Script -->
    <script>
        let deferredPrompt = null;
        window.addEventListener("beforeinstallprompt", e => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById("btn-install").style.display = "block";
        });

        document.getElementById("btn-install").onclick = async () => {
            if (!deferredPrompt) {
                alert("üì± Para instalar la app, usa el men√∫ de tu navegador (Agregar a pantalla de inicio)");
                return;
            }
            deferredPrompt.prompt();
            await deferredPrompt.userChoice;
            deferredPrompt = null;
            document.getElementById("btn-install").style.display = "none";
        };
    </script>
</body>
</html>
